/**
 Express.js Middleware â€“ next() ka concept (Complete & Easy)

ðŸ”¹ next() kya hota hai?
- next() ek function hota hai jo Express.js deta hai
- Iska kaam hota hai requestâ€“response cycle ko
  next middleware ya next route tak pahunchana

ðŸ‘‰ Simple words me:
next() bolta hai â†’ "bhai mera kaam ho gaya, ab aage wala route chalao"

--------------------------------------------------

ðŸ”¹ Express.js middleware ka default behavior
- Agar middleware me:
  âŒ res.send() / res.json() / res.sendFile() call ho gaya
  âŒ aur next() call nahi hua

ðŸ‘‰ To request wahi pe END ho jati hai
ðŸ‘‰ Aage ka route execute nahi hota

--------------------------------------------------

ðŸ”¹ Middleware bina next() (Request yahin ruk jayegi)

Example:
app.use((req, res) => {
  console.log("middleware called");
});

Request:
GET /about

Result:
- Console me log print hoga
- Lekin browser me response kabhi nahi milega
- Request hang ho jayegi âŒ

Reason:
- next() call nahi hua
- response send nahi hua

--------------------------------------------------

ðŸ”¹ Middleware ke saath next() (Correct way)

Example:
app.use((req, res, next) => {
  console.log("middleware called");
  next();
});

app.get("/about", (req, res) => {
  res.send("About page");
});

Flow:
1) Request aayi
2) Middleware run hua
3) next() call hua
4) Control next route ko mila
5) app.get("/about") execute hua
6) Response send hua

--------------------------------------------------

ðŸ”¹ Multiple middleware ka flow (VERY IMPORTANT)

Example:
app.use((req, res, next) => {
  console.log("middleware 1");
  next();
});

app.use((req, res, next) => {
  console.log("middleware 2");
  next();
});

app.get("/", (req, res) => {
  res.send("Home page");
});

Request:
GET /

Output (console):
middleware 1
middleware 2

Browser response:
Home page

--------------------------------------------------

ðŸ”¹ Middleware chain rule
- Middleware **sequence me** execute hote hain
- Har middleware ko decide karna hota hai:
  âœ… next() call kare
  âŒ ya response send karke flow stop kare

--------------------------------------------------

ðŸ”¹ next() ke bina response kab dena chahiye?

Example (Auth middleware):
app.use("/admin", (req, res, next) => {
  const isLoggedIn = false;

  if (!isLoggedIn) {
    res.send("Access Denied");
  } else {
    next();
  }
});

Rule:
- Condition fail â†’ response send â†’ next() mat call karo
- Condition pass â†’ next() call karo

--------------------------------------------------

ðŸ”¹ app.use() + next() real-world use

- Logging
- Authentication
- Authorization
- Request validation
- Error handling
- Body parsing

--------------------------------------------------

ðŸ”¹ Important rule (Interview GOLD)

- next() call hua â†’ next middleware / route execute
- next() nahi call hua â†’ request wahi stop
- res.send() ke baad next() call nahi karna chahiye

--------------------------------------------------

 -- Final One-Line Conclusion

next() Express.js ka control-transfer mechanism hai
jo request ko ek middleware se dusre middleware ya route tak pahunchata hai.
Agar next() call nahi hota aur response bhi send nahi hota,
to request hang ho jati hai.
*/
=====================In Other Way===========================
ðŸ”¹ next() kya hota hai? (Bahut IMPORTANT)

- next() ek function hota hai
- Ye Express ko bolta hai:
  ðŸ‘‰ "Is middleware ka kaam ho gaya, ab next matching route/middleware pe jao"

âš ï¸ Agar next() call NAHI kiya:
- request wahi pe atak jaati hai
- aage ka route kabhi execute nahi hota

--------------------------------------------------
ðŸ”¹ Example 1 â€“ next() ke bina problem kya hoti hai?

import express from "express";
const app = express();

app.use("/user", (req, res) => {
  console.log("Middleware 1 executed");
  // next() nahi likha âŒ
});

app.get("/user/profile", (req, res) => {
  res.send("User Profile");
});

Request:
GET /user/profile

Execution flow:
1) Request aayi /user/profile
2) Express top se check karega
3) app.use("/user") mila
4) Prefix match hua "/user" â†’ "/user/profile" âœ…
5) Middleware execute hua
6) next() nahi mila âŒ
7) Request yahi ruk gayi
8) app.get("/user/profile") kabhi execute nahi hua

Result:
âŒ Browser loading / no response

ðŸ‘‰ Problem:
Middleware ne request ko aage jaane hi nahi diya

--------------------------------------------------
ðŸ”¹ Example 2 â€“ next() ke saath SAME code (Problem solved)

import express from "express";
const app = express();

app.use("/user", (req, res, next) => {
  console.log("Middleware 1 executed");
  next(); // âœ… aage jaane ki permission
});

app.get("/user/profile", (req, res) => {
  res.send("User Profile");
});

Request:
GET /user/profile

Execution flow:
1) Request aayi /user/profile
2) app.use("/user") prefix match hua âœ…
3) Middleware execute hua
4) next() call hua
5) Express next route check karega
6) app.get("/user/profile") exact match hua âœ…
7) Response send ho gaya

Output:
User Profile
-------------------------------------------------
