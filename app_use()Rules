/**
 Express.js Routing â€“ app.use() vs app.get()/post()/put()/delete()

ğŸ”¹ Express.js route checking rule (IMPORTANT)
- Express.js routes ko **top to bottom** check karta hai
- Jo route sabse pehle match ho jata hai, wahi execute hota hai
- Jaise hi res.send() / res.json() / res.sendFile() call hota hai
  ğŸ‘‰ response close ho jata hai
  ğŸ‘‰ aage ke routes check nahi hote

--------------------------------------------------
ğŸ”¹ Prefix-based matching ka matlab (Important for beginners)

- **Prefix:** Ye hota hai **path ka starting part** jo request URL me match hona chahiye
- Agar app.use() ke path ka **starting string** request URL ke start me hai, to middleware execute hoga
- **Word count ya length matter nahi karta**, sirf start ka match check hota hai

ğŸ‘‰ Example:
app.use("/about/address", middleware);

Request URL:
- /about/address âœ… â†’ exact start match
- /about/address/pincode âœ… â†’ start same hai "/about/address", baad me extra segment hai, fir bhi match
- /about/address/xyz âœ… â†’ start same hai
- /address/pincode âŒ â†’ start "/about/address" se nahi ho raha
- /about âŒ â†’ start match nahi

ğŸ”¹ app.use() ka rule (Middleware rule)

Syntax:
app.use(path, callback)

Rules:
- Exact path match zaroori nahi hota
- HTTP method ka koi role nahi hota
- Koi bhi HTTP method ho sakta hai (GET, POST, PUT, DELETE, etc.)
- Path **prefix match** hota hai (starting part match hona chahiye)

--------------------------------------------------
ğŸ”¹ app.get()/app.post()/app.put()/app.delete() ka rule

Rules:
- HTTP method **exact match** hona chahiye
- Path **exact match** hona chahiye
- Prefix match nahi hota

Example:
app.get("/about", handler);

Match karega:
- GET /about âœ…
- GET /about/us âŒ
- POST /about âŒ

--------------------------------------------------
ğŸ”¹ Dry Run Example â€“ Case 1 (Prefix match explained clearly)

import express from "express";
const app = express();

app.use("/about/address", (req, res) => {
  res.send("app.use() method called");
});

app.get("/about/address/pincode", (req, res) => {
  res.send("app.get() method called");
});

Request:
GET /about/address/pincode

Execution flow:
1) Express top se route check karega
2) app.use("/about/address") milega
3) HTTP method koi bhi chalega âœ… (GET)
4) Path prefix check:  
   - app.use() ka path = "/about/address"  
   - Request URL = "/about/address/pincode"  
   - âœ… Ye match hota hai kyunki request URL **starting part** "/about/address" se match karta hai  
     (extra segments like "/pincode" ignore, prefix match ka matlab start match hai)
5) app.use() execute ho gaya
6) res.send("app.use() method called") call hua
7) Response send ho gaya, request terminate ho gayi
8) aage ka route app.get("/about/address/pincode") check nahi hua

Output:
app.use() method called

--------------------------------------------------
ğŸ”¹ Dry Run Example â€“ Case 2 (Order changed, exact match)

import express from "express";
const app = express();

app.get("/about/address/pincode", (req, res) => {
  res.send("app.get() method called");
});

app.use("/about/address", (req, res) => {
  res.send("app.use() method called");
});

Request:
GET /about/address/pincode

Execution flow:
1) Express top se route check karega
2) app.get("/about/address/pincode") milega
3) Method = GET âœ…, Path = exact match âœ…
4) app.get() execute ho gaya
5) res.send("app.get() method called") call hua
6) Response send ho gaya, request terminate ho gayi
7) app.use("/about/address") check hi nahi hua

Output:
app.get() method called

--------------------------------------------------
ğŸ”¹ Key Takeaways (Beginners friendly)

1ï¸âƒ£ **Prefix match ka matlab** = request URL ka **starting part** match hona chahiye  
2ï¸âƒ£ app.use() me **method koi bhi chal sakta hai**, exact match nahi chahiye  
3ï¸âƒ£ app.get()/post()/put()/delete() me **method + path exact match** hona chahiye  
4ï¸âƒ£ Express routes ko **top-to-bottom** evaluate karta hai  
5ï¸âƒ£ Jaise hi response send hota hai, request terminate ho jati hai, aage ke routes check nahi hote  
6ï¸âƒ£ Route order se result change ho sakta hai (prefix vs exact match)

--------------------------------------------------
 Final One-Line Conclusion

app.use() prefix-based matching karta hai aur HTTP method se independent hota hai,  
jabki app.get()/post()/put()/delete() exact path aur exact HTTP method par kaam karte hain.  
Prefix match ka matlab hai **request URL ka starting part match ho jaaye**, baaki extra path ignore kiya jata hai.
*/
================================In Other Way==============================
/**
 * ğŸ”¹ app.use() â€“ Deep Explanation (Express.js)
 *
 * ------------------------------------------
 * 1ï¸âƒ£ app.use() kya hai?
 *
 * - `app.use()` Express ka ek **method** hai
 * - Iska kaam hai **middleware functions ko application me register karna**
 * - Har incoming request sabse pehle app.use() ke middlewares se ho kar jaati hai
 *
 * ------------------------------------------
 *
 * 2ï¸âƒ£ Middleware kya hota hai?
 *
 * - Middleware ek **function** hota hai
 * - Jo request (req) aur response (res) ke beech me kaam karta hai
 *
 * Middleware ke paas 3 cheeze hoti hain:
 * - req  â†’ request object
 * - res  â†’ response object
 * - next â†’ function (next middleware ko call karta hai)
 *
 * Syntax:
 *   (req, res, next) => { ... }
 *
 * ------------------------------------------
 *
 * 3ï¸âƒ£ app.use() ka basic syntax
 *
 *   app.use(middlewareFunction);
 *
 * ya
 *
 *   app.use(path, middlewareFunction);
 *
 * ------------------------------------------
 *
 * 4ï¸âƒ£ app.use() bina path ke
 *
 * Example:
 *   app.use((req, res, next) => {
 *     console.log("Middleware executed");
 *     next();
 *   });
 *
 * - Ye middleware **har request** pe chalega
 * - Chahe route kuch bhi ho (`/`, `/login`, `/users`)
 *
 * ------------------------------------------
 *
 * 5ï¸âƒ£ app.use() path ke sath
 *
 * Example:
 *   app.use('/admin', adminMiddleware);
 *
 * - Ye middleware sirf un routes ke liye chalega
 * - Jo `/admin` se start hote hain
 *
 * Example:
 * - /admin
 * - /admin/users
 * - /admin/settings
 *
 * ------------------------------------------
 *
 * 6ï¸âƒ£ app.use() execution order (MOST IMPORTANT ğŸ”¥)
 *
 * - Middlewares **top to bottom** execute hote hain
 * - Jis order me likhe gaye hain, usi order me run karte hain
 *
 * Example:
 *   app.use(m1);
 *   app.use(m2);
 *   app.use(m3);
 *
 * Flow:
 *   request â†’ m1 â†’ m2 â†’ m3 â†’ route
 *
 * ------------------------------------------
 *
 * 7ï¸âƒ£ next() ka role
 *
 * - `next()` call hota hai â†’ control next middleware ko milta hai
 * - Agar `next()` call nahi kiya:
 *   â†’ request wahi pe stuck ho jaati hai
 *   â†’ response hang ho jata hai
 *
 * ------------------------------------------
 *
 * 8ï¸âƒ£ Response bhejne ke baad next() âŒ
 *
 * âŒ Galat:
 *   res.send("Done");
 *   next();
 *
 * - Response ke baad next() call nahi karna chahiye
 *
 * ------------------------------------------
 *
 * 9ï¸âƒ£ app.use() vs app.get()
 *
 * - app.use():
 *   â†’ ALL HTTP methods (GET, POST, PUT, DELETE)
 *
 * - app.get():
 *   â†’ Sirf GET requests
 *
 * ------------------------------------------
 *
 * ğŸ”Ÿ Real-world middlewares (examples)
 *
 * - express.json()        â†’ JSON body parse
 * - express.urlencoded() â†’ Form data parse
 * - express.static()     â†’ Static files serve
 * - auth middleware      â†’ Authentication check
 * - logger middleware    â†’ Request logging
 *
 * ------------------------------------------
 *
 * 1ï¸âƒ£1ï¸âƒ£ Error-handling middleware
 *
 * - Special middleware hota hai
 * - Isme 4 parameters hote hain
 *
 * Syntax:
 *   (err, req, res, next) => { ... }
 *
 * Example:
 *   app.use((err, req, res, next) => {
 *     res.status(500).send("Something went wrong");
 *   });
 *
 * ------------------------------------------
 *
 * 1ï¸âƒ£2ï¸âƒ£ app.use() kab use karte hain?
 *
 * - Common logic lagana ho
 * - Authentication / Authorization
 * - Validation
 * - Logging
 * - Static files
 * - Global error handling
 *
 * ------------------------------------------
 *
 *   One-line summary (Interview ready):
 *
 * - `app.use()` Express ka method hai
 * - Ye middleware functions ko register karta hai
 * - Middleware requestâ€“response cycle ke beech me kaam karta hai
 * - Execution order top to bottom hota hai
 * - `next()` control aage pass karta hai
 */

=========================================================================
/**
====================================================
ğŸ“Œ Express.js â€“ app.use() DEEP EXPLANATION (Beginner â†’ Pro)
====================================================

----------------------------------------------------
ğŸ”¹ Sabse pehle: app.use() hota kya hai?

app.use() = Express ka middleware register karne ka method

ğŸ‘‰ Matlab:
- ye request aur response ke beech ka kaam karta hai
- final response dena zaroori nahi hota
- zyada tar validation, auth, logging, parsing ke liye use hota hai

----------------------------------------------------
ğŸ”¹ app.use() ka basic syntax

app.use(path, middleware)

middleware structure:
(req, res, next)

----------------------------------------------------
ğŸ”¹ app.use() ke 3 MOST IMPORTANT RULES

âœ… Rule 1: HTTP METHOD ka koi role nahi hota
- GET / POST / PUT / DELETE sab ke liye chalega

âœ… Rule 2: EXACT PATH match zaroori nahi
- PREFIX match hota hai

âœ… Rule 3: next() call na kiya to request wahi ruk jayegi

----------------------------------------------------
ğŸ”¹ PREFIX MATCHING kya hota hai? (CONFUSION CLEAR)

Prefix ka matlab:
ğŸ‘‰ Request URL ka **starting part**

Example:
app.use("/about/address", middleware);

Prefix = "/about/address"

----------------------------------------------------
ğŸ”¹ Prefix match ka clear logic (IMPORTANT)

Request path: "/about/address/pincode"

Check kaise hota hai:
- Express ye dekhta hai:
  "Kya request URL ka STARTING PART exactly
   '/about/address' se same hai?"

Agar haan â†’ prefix match âœ…  
Agar nahi â†’ no match âŒ

âš ï¸ Word count, slash count, last word â€” kuchh bhi matter nahi karta  
âš ï¸ Sirf starting string match matter karta hai

----------------------------------------------------
ğŸ”¹ Prefix matching examples (CRYSTAL CLEAR)

app.use("/about/address", middleware);

âœ… Match karega:
- /about/address
- /about/address/pincode
- /about/address/xyz/123

âŒ Match nahi karega:
- /address/pincode
- /about
- /about/add

----------------------------------------------------
ğŸ”¹ app.use("/") ka special case

app.use("/", middleware);

ğŸ‘‰ "/" sabhi URLs ka starting hota hai  
Isliye:

âœ… Match karega:
- /about
- /login
- /api/user
- /anything

âš ï¸ Isliye app.use("/") ko upar likhna dangerous hota hai

----------------------------------------------------
ğŸ”¹ Dry Run Example 1 â€“ app.use() upar likhne ka effect

import express from "express";
const app = express();

app.use("/", (req, res) => {
  res.send("I run for every request");
});

app.get("/about", (req, res) => {
  res.send("About page");
});

Request:
GET /about

Execution flow:
1) Express top se route check karega
2) app.use("/") mila
3) Prefix "/" match hua "/about" se âœ…
4) Middleware execute ho gaya
5) res.send() hua
6) Response close
7) app.get("/about") kabhi run hi nahi hua

----------------------------------------------------
ğŸ”¹ app.use() vs app.get() (CLEAR DIFFERENCE)

app.use():
- Middleware ke liye
- Prefix match
- Any HTTP method
- next() ka concept

app.get()/post():
- Final response ke liye
- Exact path
- Exact HTTP method
- next() optional

----------------------------------------------------
ğŸ”¹ app.use() me next() ka role

Example:

app.use("/api", (req, res, next) => {
  console.log("Middleware executed");
  next();
});

ğŸ‘‰ next() bole:
"Is middleware ka kaam khatam,
ab next matching route check karo"

----------------------------------------------------
ğŸ”¹ next() hata diya to kya hoga?

app.use("/api", (req, res) => {
  console.log("Middleware executed");
  // next() missing âŒ
});

Result:
- Request hang ho jayegi
- Browser loading dikhega
- Aage ka route kabhi nahi chalega

----------------------------------------------------
ğŸ”¹ Real-world usage of app.use()

1ï¸âƒ£ Body parsing
app.use(express.json());

2ï¸âƒ£ Logging
app.use((req, res, next) => {
  console.log(req.method, req.url);
  next();
});

3ï¸âƒ£ Auth middleware
app.use("/api", authMiddleware);

4ï¸âƒ£ Router mount
app.use("/api/user", userRouter);

----------------------------------------------------
ğŸ”¹ Router + app.use() DEEP FLOW

server.js
---------
app.use("/api/user", userRouter);

router file:
router.get("/profile", handler);

Request:
GET /api/user/profile

Flow:
1) "/api/user" prefix match hua
2) Control router ko gaya
3) Router ke andar "/profile" check hua
4) Exact match
5) Response send

----------------------------------------------------
ğŸ”¹ Common beginner mistakes (VERY IMPORTANT)

âŒ app.use("/") ko upar likh dena
âŒ next() bhool jana
âŒ app.use() ko final response ke liye use karna
âŒ Prefix logic galat samajhna

----------------------------------------------------
  FINAL GOLDEN SUMMARY

- app.use() = middleware registration
- Prefix matching = starting path match
- HTTP method matter nahi karta
- next() request ko aage badhata hai
- Galat jagah use kiya â†’ bugs

====================================================
*/
