/*
================= Execution Life Cycle of Request & Response in Express.js =================

Express.js ek water pipe ki tarah kaam karta hai.
Ye ek ONE-WAY ROAD hota hai, jisme request sirf ek hi direction me travel karti hai,
return (back) aana allowed nahi hota.

Matlab:
- Express aage ki taraf hi chalta hai
- Peeche mud ke kabhi nahi dekhta

-------------------- Basic Feel --------------------

Express ek one-way road hai:
request aati hai → aage hi aage badhti hai
response milte hi journey khatam
error aaye to bhi aage hi handler dhundhta hai
kabhi peeche mud ke nahi dekhta

-------------------- Technical Flow --------------------

1) Jab user koi request karta hai,
   to sabse pehle Express.js ye check karta hai:
   "requested path kya hai?"

2) Jab requested path pata chal jata hai,
   to Express us path ko file ke TOP TO BOTTOM
   execution order me check karna start karta hai.

3) Express line-by-line ye dekhta hai:
   - kaunsa middleware match kar raha hai
   - kaunsa route match kar raha hai

   Ye process niche ki taraf chalta rehta hai.

4) Agar koi route ya middleware match NAHI karta,
   to Express last me 404 wala middleware execute karta hai.

5) Agar 404 middleware bhi nahi mila,
   to browser me default "URL not found" type ka message aata hai.

-------------------- Successful Match Case --------------------

6) Agar koi route ya middleware match ho jata hai,
   to wahi sabse pehle execute hota hai.

7) Agar us route ya middleware ke andar
   response wahi pe send kar diya jata hai,
   to request–response life cycle wahi pe END ho jata hai.

   Uske baad Express aage nahi badhta.

-------------------- Error Flow (Most Important) --------------------

8) Agar kisi route ya middleware ke andar error aata hai,
   to Express ye dekhta hai ki:

   - jis jagah (line / middleware / route) me error aaya hai
   - wahan se AAGE (niche) ki taraf
     error-handling middleware kahan defined hai

9) Express error aane ke baad:
   - peeche nahi jata
   - sirf forward direction me hi check karta hai

10) Agar error-handling middleware mil jata hai,
    to wahi pe request–response life cycle break ho jata hai
    aur error clean way me user ko send kar diya jata hai.

11) Agar error-handling middleware nahi mila,
    to application crash ho jati hai.

-------------------- Water Pipe Analogy --------------------

Ye bilkul usi tarah hai jaise:
- pipe me pani flow karta hai
- agar kahin pipe fat jata hai
- to pani wahi se bahar nikalta hai
- pani peeche return nahi hota

-------------------- Error Middleware LAST me kyu likhte hain? --------------------

Error-handling middleware ko LAST me isliye likhte hain kyunki:

- Express top to bottom flow me kaam karta hai
- Express kabhi back nahi jata, sirf aage jata hai

Agar hum error middleware ko TOP me likh den,
aur uske niche routes ya middleware ho,
to jab un routes me error aayega,
Express us error middleware tak pahunch hi nahi payega
kyunki wo us line ko already cross kar chuka hoga.

Isliye:
- Error middleware ko hamesha LAST me likhte hain
- Taaki kisi bhi route ya middleware ke baad
  aane wala error safely handle ho sake

===========================================================================================
*/
/*
================= Execution Life Cycle of Request & Response in Express.js =================

Express.js works like a water pipe.
It is a ONE-WAY ROAD, where a request can travel only in one direction.
Returning back (going backward) is NOT allowed.

Meaning:
- Express always moves forward
- It never looks back

-------------------- Basic Feel --------------------

Express is a one-way road:
request comes → moves forward step by step
once response is sent → the journey ends
if an error occurs → Express still looks forward for an error handler
it never goes back

-------------------- Technical Flow --------------------

1) When a user makes a request,
   the first thing Express.js does is:
   it identifies the requested path.

2) After identifying the requested path,
   Express starts checking the file
   from TOP TO BOTTOM in execution order.

3) Express checks line by line:
   - which middleware matches the path
   - which route matches the path

   This checking process keeps moving downward.

4) If no route or middleware matches the requested path,
   Express executes the 404 (Route Not Found) middleware.

5) If the 404 middleware is also not defined,
   the browser shows a default "URL not found" type message.

-------------------- Successful Match Case --------------------

6) If a route or middleware matches the requested path,
   that matched middleware or route is executed first.

7) If that route or middleware sends a response immediately,
   the request–response life cycle ENDS at that point.

   After sending the response,
   Express does not move further.

-------------------- Error Flow (Most Important Part) --------------------

8) If an error occurs inside any route or middleware,
   Express checks:

   - the exact place (line / middleware / route) where the error occurred
   - from that point onward (downward),
     where the error-handling middleware is defined

9) After an error occurs:
   - Express does NOT go backward
   - it only moves forward to find an error-handling middleware

10) If an error-handling middleware is found,
    the request–response life cycle breaks at that point
    and the error is sent to the user in a clean and controlled way.

11) If no error-handling middleware is found,
    the application crashes.

-------------------- Water Pipe Analogy --------------------

This behavior is exactly like a water pipe:
- water flows in one direction
- if the pipe breaks at any point
- water leaks from that same point
- water never flows back

-------------------- Why Error-Handling Middleware is Written at the LAST --------------------

Error-handling middleware is always written at the LAST because:

- Express follows a top-to-bottom execution flow
- Express never goes backward, it only moves forward

If the error-handling middleware is written at the TOP,
and routes or other middleware are written below it,
then when an error occurs in those routes,
Express will never reach the error-handling middleware
because it has already passed that line.

Therefore:
- Error-handling middleware must always be written at the LAST
- So that errors from any route or middleware
  can be safely and properly handled

===========================================================================================
*/
