/**
 * âŒ CORS ERROR EXPLANATION (STEP BY STEP)
 *
 * Error:
 * Access to XMLHttpRequest at 'http://localhost:3000/api/v1/users'
 * from origin 'http://localhost:5173'
 * has been blocked by CORS policy
 *
 * --------------------------------------------------------
 *
 * Problem kya hai?
 *
 * Frontend chal raha hai:
 * http://localhost:5173   (Vite + React)
 *
 * Backend API chal rahi hai:
 * http://localhost:3000   (Express)
 *
 * Dono ka PORT alag hai â†’ isliye dono ka ORIGIN alag hai
 *
 * Browser bolta hai:

    5173 wali website, 3000 wale server se data mang rahi hai
    pehle mujhe proof dikhao ki 3000 wale ne permission di hai

   Aur backend ne permission nahi di, isliye browser ne request block kar di âŒ

 * Browser ka rule hai:
 * Agar ek origin (5173) doosre origin (3000) se request kare,
 * to server ko explicitly allow karna padta hai.
 *
 * Backend ne allow nahi kiya,
 * isliye browser ne request BLOCK kar di.
 *
 * CORS kya hota hai?
   CORS = Cross-Origin Resource Sharing
   CORS = browser ka security rule
   jo bolta hai:
   Dusre origin se request tabhi allow hogi jab server bole: haan bhai allowed hai

 * In Sort : 
   Cross (dusra) Origin se Resource (data) share karna
 * --------------------------------------------------------
 *
 * âš ï¸ Important baat:
 *
 * - Ye backend ka error nahi hai
 * - Ye axios ka error nahi hai
 * - Ye browser ka security rule (CORS) hai
 *
 * Isi wajah se:
 * - Postman / Thunder Client me API chal jaati hai
 * - Browser me request fail ho jaati hai
 *
 * --------------------------------------------------------
 *
 * â“ 304 (Not Modified) ka kya matlab?
 *
 * 304 caching se related hai,
 * lekin main problem CORS hi hai.
 * CORS fix karte hi ye issue bhi normal ho jaata hai.
 *
 * --------------------------------------------------------
 *
 * âœ… FINAL SOLUTION (CORRECT WAY)
 *
 * Step 1:
 * Backend me cors package install karo
 *
 * npm install cors
 *
 * Step 2:
 * Express app me cors middleware lagao
 * (sabse upar lagana bahut zaroori hai)
 *
 * import cors from "cors";
 *
 * app.use(cors());
 *
 * Ab backend kya bolega browser ko?

  Response headers me ye jayega:
  Access-Control-Allow-Origin: * ya fir Access-Control-Allow-Origin: http://localhost:5173
 * yani ki backend response me ye header jayega:
 * Access-Control-Allow-Origin: * ya fir Access-Control-Allow-Origin: http://localhost:5173
 *
 * Browser bolega:
 * "Frontend allowed hai"
 *
 * --------------------------------------------------------
 *
 * âœ… Agar sirf React frontend ko allow karna ho
 *
 * app.use(
 *   cors({
 *     origin: "http://localhost:5173",
 *     methods: ["GET", "POST", "PUT", "DELETE"],
 *     credentials: true,
 *   })
 * );
 *
 * --------------------------------------------------------
 *
 * ğŸ” COMPLETE FLOW
 *
 * 1) React (5173) request bhejta hai
 * 2) Browser check karta hai: origin different hai?
 * 3) Backend response me CORS headers bhejta hai
 * 4) Browser headers check karta hai
 * 5) Allowed â†’ data mil jaata hai
 * 6) Not allowed â†’ browser request block kar deta hai
 *
 * --------------------------------------------------------
 *
 * âŒ Galat tareeke (Avoid karna chahiye)
 *
 * - Chrome me CORS disable extension
 * - axios config se CORS fix karna
 * - mode: "no-cors" use karna
 *
 * CORS sirf backend se hi fix hota hai
 *
 * --------------------------------------------------------
 *
 *  Note : CORS is a browser security mechanism.
 *         When frontend and backend are on different origins,
 *         the backend must explicitly allow the frontend
 *         using CORS headers.
 */
==========================================================
/**
 *  CORS CONFUSION â€“ REALITY CLEAR EXPLANATION
 *
 * Core baat (Direct Truth):
 *
 * CORS backend ka â€œdata dene ka ruleâ€ nahi hai,
 * CORS browser ka â€œdata accept karne ka ruleâ€ hai.
 *
 * Backend hamesha data bhej deta hai,
 * browser decide karta hai:
 * data accept karna hai ya block karna hai.
 *
 * --------------------------------------------------------
 *
 * ğŸ¤¯ Confusion kya hota hai?
 *
 * Pehli baar jab React frontend se Express backend ko
 * API request bheji jaati hai,
 * to browser CORS error dikha deta hai.
 *
 * Fir jab cors middleware hata diya jaata hai,
 * tab bhi kabhi-kabhi browser console me data print ho jaata hai.
 *
 * Isi wajah se lagta hai:
 * "Fir CORS ka matlab kya hua?"
 * --------------------------------------------------------
 *
 * ğŸ¤¯ Tera confusion exactly kya hai?
 *
 * Tu bol raha hai:
 *
 * â€œPehle CORS error aaya
 * fir maine cors middleware hata diya
 * fir bhi browser console me data print ho raha hai
 * to fir CORS ka matlab kya?â€
 *
 * ğŸ‘‰ Observation sahi hai
 * ğŸ‘‰ Conclusion thoda misleading lag raha hai
 * ab reason samajh ğŸ‘‡
 *
 * --------------------------------------------------------
 *
 *   Sabse important truth (yaad rakhna)
 *
 * â— CORS â€œON/OFF switchâ€ nahi hai
 * â— CORS runtime permission nahi hota
 *
 * CORS ka kaam sirf itna hai:
 *
 * Backend response me header add karna
 *
 * Access-Control-Allow-Origin: http://localhost:5173
 *
 * Browser sirf header dekhta hai,
 * backend ke code ko nahi.
 *
 * --------------------------------------------------------
 *
 * ğŸ¤” Fir CORS hataane ke baad bhi data kyu aa raha hai?
 *
 * Iske 4 real-world reasons hote hain
 * (99% cases inhi me se hote hain)
 *
 * --------------------------------------------------------
 *
 * âœ… Reason 1ï¸âƒ£: Vite proxy use ho raha hai (MOST COMMON) 
 *
 * Agar tere vite.config.js me kuch aisa hai:
 *
 * server: {
 *   proxy: {
 *     "/api": "http://localhost:3000"
 *   }
 * }
 *
 * aur tu request kar raha hai:
 *
 * axios.get("/api/v1/users");
 *
 * ğŸ‘‰ browser ko lagta hai:
 *
 * http://localhost:5173/api/v1/users
 *
 * ğŸ‘‰ same origin
 * ğŸ‘‰ browser CORS check hi nahi karta
 *
 *  Is case me:
 *
 * CORS middleware ho ya na ho
 *
 * koi farq nahi padta
 *
 * --------------------------------------------------------
 *
 * âœ… Reason 2ï¸âƒ£: Browser cache (headers cache ho gaye)
 *
 * Tu pehle CORS laga chuka tha
 * Browser ne response headers cache kar liye:
 *
 * Access-Control-Allow-Origin: *
 *
 * Baad me tu cors hata deta hai
 * par browser bolta hai:
 *
 * â€œmere paas to pehle se permission haiâ€
 *
 * Solution:
 *
 * Hard refresh (Ctrl + Shift + R)
 *
 * DevTools â†’ Network â†’ Disable cache
 *
 * Browser restart
 *
 * --------------------------------------------------------
 *
 * âœ… Reason 3ï¸âƒ£: Request actually browser se aa hi nahi rahi
 *
 * Kabhi-kabhi:
 *
 * React code server-side execute ho jata hai (dev tooling)
 *
 * ya data kisi aur layer se aa raha hota hai
 *
 * Par simple test hai ğŸ‘‡
 *
 * ğŸ‘‰ Network tab me request dikhe?
 * agar haan â†’ browser involved
 * agar nahi â†’ CORS ka scene hi nahi
 *
 * --------------------------------------------------------
 *
 * âœ… Reason 4ï¸âƒ£: Same-origin ho gaya unknowingly
 *
 * Agar:
 *
 * frontend build karke
 *
 * backend ke express.static() se serve kar raha hai
 *
 * To:
 *
 * http://localhost:3000
 *
 * se hi React + API dono aa rahe honge
 *
 * ğŸ‘‰ Same origin
 * ğŸ‘‰ No CORS needed
 *
 * --------------------------------------------------------
 *
 * âŒ Ek bahut badi misunderstanding (isko clear karte hain)
 *
 * âŒ Galat soch:
 *
 * â€œCORS backend permission deta hai ki data de ya na deâ€
 *
 * âœ… Sahi soch:
 *
 * â€œBackend data hamesha de deta hai,
 * browser decide karta hai accept kare ya block kareâ€
 *
 * Backend ka response wire pe aata hai,
 * par browser JS ko use karne nahi deta.
 *
 * --------------------------------------------------------
 *
 *  Proof (dimag kholne wala)
 *
 * Same API call:
 *
 * âŒ Browser â†’ CORS error
 *
 * âœ… Postman â†’ data milta hai
 *
 * Kyun?
 *
 * ğŸ‘‰ Postman browser nahi hai
 * ğŸ‘‰ Uspe CORS apply hi nahi hota
 *
 * --------------------------------------------------------
 *
 * Final mental model (yaad rakh)
 *
 * Backend  â†’ data bhejta hai
 * Browser  â†’ CORS rule apply karta hai
 * CORS     â†’ sirf headers ka game hai
 *
 * --------------------------------------------------------
 *
 * Tere sentence ko correct way me likhen to:
 *
 * â€œCORS isliye lagate hain taaki browser ko bataya ja sake
 * ki kaunse origin se aane wali request ko accept karna hai.
 * Agar CORS headers nahi mile, to browser response ko block kar deta hai,
 * chahe backend ne data bhej diya ho.â€
 */
