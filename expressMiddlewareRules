/**
 Express.js ‚Äì Middleware, next(), aur express.Router() (Beginner Friendly Notes)

==================================================
üîπ Sabse pehle samjho: Middleware kya hota hai?

Middleware = beech ka kaam  
Client request bhejta hai aur response milne ke beech me jo function chalta hai,
use middleware kehte hain.

üëâ Middleware ye kaam kar sakta hai:
- request check karna
- auth verify karna
- data modify karna
- ya request ko next step pe bhejna

Middleware ka structure:
(req, res, next)

--------------------------------------------------
üîπ next() kya hota hai? (Bahut IMPORTANT)

- next() ek function hota hai
- Ye Express ko bolta hai:
  üëâ "Is middleware ka kaam ho gaya, ab next matching route/middleware pe jao"

‚ö†Ô∏è Agar next() call NAHI kiya:
- request wahi pe atak jaati hai
- aage ka route kabhi execute nahi hota

--------------------------------------------------
üîπ Example 1 ‚Äì next() ke bina problem kya hoti hai?

import express from "express";
const app = express();

app.use("/user", (req, res) => {
  console.log("Middleware 1 executed");
  // next() nahi likha ‚ùå
});

app.get("/user/profile", (req, res) => {
  res.send("User Profile");
});

Request:
GET /user/profile

Execution flow:
1) Request aayi /user/profile
2) Express top se check karega
3) app.use("/user") mila
4) Prefix match hua "/user" ‚Üí "/user/profile" ‚úÖ
5) Middleware execute hua
6) next() nahi mila ‚ùå
7) Request yahi ruk gayi
8) app.get("/user/profile") kabhi execute nahi hua

Result:
‚ùå Browser loading / no response

üëâ Problem:
Middleware ne request ko aage jaane hi nahi diya

--------------------------------------------------
üîπ Example 2 ‚Äì next() ke saath SAME code (Problem solved)

import express from "express";
const app = express();

app.use("/user", (req, res, next) => {
  console.log("Middleware 1 executed");
  next(); // ‚úÖ aage jaane ki permission
});

app.get("/user/profile", (req, res) => {
  res.send("User Profile");
});

Request:
GET /user/profile

Execution flow:
1) Request aayi /user/profile
2) app.use("/user") prefix match hua ‚úÖ
3) Middleware execute hua
4) next() call hua
5) Express next route check karega
6) app.get("/user/profile") exact match hua ‚úÖ
7) Response send ho gaya

Output:
User Profile

--------------------------------------------------
üîπ Ab samjho: express.Router() kya hota hai?

Router = mini Express app  
- Code ko **alag-alag files** me divide karne ke liye
- Clean code, scalable project ke liye
- Same prefix ke routes ek jagah rakhne ke liye

--------------------------------------------------
üîπ Router ke bina problem kya hoti hai?

‚ùå Sab routes ek hi file me
‚ùå File bahut badi ho jati hai
‚ùå Maintain karna mushkil
‚ùå Real-world project me bad practice

Example (Router ke bina):

import express from "express";
const app = express();

app.get("/user", handler);
app.get("/user/profile", handler);
app.post("/user/login", handler);
app.delete("/user/:id", handler);

üëâ Jaise-jaise project badhega, file aur gandi hoti jayegi

--------------------------------------------------
üîπ Router ke saath solution (Clean & Professional)

user.routes.js
----------------
import express from "express";
const router = express.Router();

router.get("/", (req, res) => {
  res.send("All users");
});

router.get("/profile", (req, res) => {
  res.send("User profile");
});

export default router;

server.js
----------
import express from "express";
import userRouter from "./user.routes.js";

const app = express();

app.use("/user", userRouter);

--------------------------------------------------
üîπ Router + prefix + next() ka combined dry run

Request:
GET /user/profile

Execution flow:
1) Express app.use("/user", userRouter) dekhega
2) Prefix "/user" match hua "/user/profile" se ‚úÖ
3) Control router ke paas chala gaya
4) Router ke andar "/profile" route mila
5) router.get("/profile") exact match hua
6) Response send ho gaya

Output:
User profile

--------------------------------------------------
üîπ Router use karne ke fayde (Beginner points)

1Ô∏è‚É£ Code clean & readable
2Ô∏è‚É£ Same prefix ke routes ek file me
3Ô∏è‚É£ Easy debugging
4Ô∏è‚É£ Real-world industry standard
5Ô∏è‚É£ Team work ke liye best

--------------------------------------------------
 FINAL SUPER SIMPLE CONCLUSION

- app.use() = prefix-based, middleware ke liye
- app.get()/post() = exact match, final response ke liye
- next() = request ko aage badhane ki permission
- Router = routes ko organize karne ka professional tareeqa
- Express hamesha top-to-bottom routes check karta hai
*/
